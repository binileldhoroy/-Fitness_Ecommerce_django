{% extends 'main.html' %}
{% block content %}
{% load static %}
<div class="container mt-5">
    <div class="bs-example row">
        <div class="col-md-4">

            <div class="card" style="width: 18rem;">
                <ul class="list-group list-group-flush" id="list">
                    <a href="{% url 'my-profile' %}"><li class="list-group-item active side_section" value="sectionB">My Profile</li></a>
                    <a href="{% url 'my-address' %}"><li class="list-group-item side_section" value="sectionA">Add Address</li></a>
                    <a href="{% url 'my-wishlist' %}"><li class="list-group-item side_section" value="sectionA">My Wishlist <span class="count">{{counts}}</span></li></a>
                    <a href="{% url 'change-password' %}"><li class="list-group-item  side_section" value="sectionA">Change Password</li></a>
                </ul>
            </div>

        </div>
        <div class="col-md-8">
            <div class="tab-content" >
                <div id="section">
                        <div class="main-body">
                              <div class="row gutters-sm">
                                <div class="col-md-4 mb-3">
                                  <div class="card">
                                    <div class="card-body">
                                      <div class="d-flex flex-column align-items-center text-center">
                                        <img src="{{ request.user.biopic.url }}" alt="Admin" class="rounded-circle" width="150">
                                        <div class="mt-3">
                                          <h4>@{{request.user.username}}</h4>
                                          <p class="text-muted font-size-sm"></p>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  
                                </div>
                                <div class="col-md-8">
                                  <div class="card mb-3">
                                    <div class="card-body">
                                      <div class="row">
                                        <div class="col-sm-3">
                                          <h6 class="mb-0">Full Name</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{request.user.first_name}} {{request.user.last_name}}
                                        </div>
                                      </div>
                                      <hr>
                                      <div class="row">
                                        <div class="col-sm-3">
                                          <h6 class="mb-0">Email</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{request.user.email}}
                                        </div>
                                      </div>
                                      <hr>
                                      <div class="row">
                                        <div class="col-sm-3">
                                          <h6 class="mb-0">Mobile</h6>
                                        </div>
                                        <div class="col-sm-9 text-secondary">
                                            {{request.user.phone}}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="social-ficons mt-4 w-100 d-flex justify-content-end">
                                      <ul>
                                          <li><a href="{% url 'edit-profile' %}"  class="btn  btn-block btn-outline-success btn-sm m-1">Edit</a></li>
                                      </ul>
                                  </div>
                                </div>
                              </div>
                            </div>
                </div>
                
            </div>

            <div >
              <p>Your Referral Link :-</p>
              <div class="row">
                <div class="col-md-8">
                  <div class="input-group">
                    <input type="text" class="form-control" disabled value="http://127.0.0.1:8000/signup/{{referral.ref_code}}" id="myInput">
                  </div>
                   
                </div>
                <div class="col-md-4">
                  <div class="tooltip1">
                    <button onclick="myFunction()" onmouseout="outFunc()" class="btn btn-outline-success">
                      <span class="tooltiptext" id="myTooltip">Copy to clipboard</span>
                      Copy link
                      </button>
                    </div>
                </div>
              </div>
                <div class="mt-2">
                  <button class="btn btn-success whatsapp">
                   <a href="https://api.whatsapp.com/send?text=http://127.0.0.1:8000/signup/{{referral.ref_code}}" data-action="share/whatsapp/share">Share via Whatsapp</a>
                </button>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
  function myFunction() {
    var copyText = document.getElementById("myInput");
    copyText.select();
    copyText.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(copyText.value);
    
    var tooltip = document.getElementById("myTooltip");
    tooltip.innerHTML = "Copied: " + copyText.value;
  }
  
  function outFunc() {
    var tooltip = document.getElementById("myTooltip");
    tooltip.innerHTML = "Copy to clipboard";
  }
  </script>
{% endblock %}